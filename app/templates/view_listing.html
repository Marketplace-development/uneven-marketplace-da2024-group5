{% extends "base.html" %}

{% block title %}{{ listing.listing_name }} - ViaVia{% endblock %}

{% block content %}
<div class="container mt-5">
    <!-- Listing Details -->
    <div class="card">
        <div class="card-body">
            <h1 class="card-title text-primary">{{ listing.listing_name }}</h1>
            <p class="card-text fs-5">Price: <strong>${{ listing.price }}</strong></p>

            <!-- Buy Now Button -->
            <form method="POST">
                <button type="submit" class="btn btn-primary w-100">Buy Now</button>
            </form>
        </div>
    </div>

    <!-- Reviews Section -->
    <div class="mt-4">
        <h2 class="text-secondary">Reviews</h2>
        <ul class="list-group">
            {% for review in reviews %}
            <li class="list-group-item">
                <strong>{{ review.user.username }}:</strong> 
                {{ review.review_text }} - Rating: <span class="text-warning">{{ review.rating }}/5</span>
            </li>
            {% else %}
            <li class="list-group-item">No reviews yet.</li>
            {% endfor %}
        </ul>

        <!-- Add Review Link -->
        <div class="mt-3">
            <a href="{{ url_for('main.add_review', listing_id=listing.id) }}" class="btn btn-outline-primary">
                Add a Review
            </a>
        </div>
    </div>
</div>
{% endblock %}
